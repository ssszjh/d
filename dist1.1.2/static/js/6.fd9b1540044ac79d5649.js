webpackJsonp([6],{He0X:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("eWoK"),n={data:function(){return{g:[],allNumber:"",allPrice_current:""}},created:function(){this.loading()},methods:{change:function(t,a,e){this.$axios.post("/cart_updateIsSelected","username=zzz&cart_id="+t+"&goods_num="+a).then(function(t){}).catch(function(t){console.log(t)});var n=this.g[e].isSelected?a:-a;i.a.$emit("addShoppingCart",n)},reduce:function(t,a){this.g[a].num--,this.g[a].num<=0?(this.$toast({message:"数量不能为负",position:"middle",duration:1e3}),this.g[a].num=1):1==this.g[a].isSelected&&(this.calculation(0,t),i.a.$emit("addShoppingCart",-1))},add:function(t,a){1==this.g[a].isSelected&&(this.calculation(1,t),i.a.$emit("addShoppingCart",1)),this.g[a].num++},del:function(t,a){if(1==this.g[a].isSelected){var e=this.g[a].num;i.a.$emit("addShoppingCart",-e)}this.g.splice(a,1),this.$axios.post("/cart_deleteGoodsFromCart","username=zzz&cart_id="+t).then(function(t){}).catch(function(t){console.log(t)})},calculation:function(t,a){this.$axios.post("/cart_updateGoods_numWithType","type="+t+"&cart_id="+a+"&username=zzz").then(function(t){}).catch(function(t){console.log(t)})},loading:function(){var t=this;this.$axios.get("/cart_getGoodsListFromCart").then(function(a){t.g=a.data.list,t.allNumber=a.data.allNumber,t.allPrice_current=a.data.allPrice_current,i.a.$emit("addShoppingChange",t.allNumber)}).catch(function(t){console.log(t)})}},computed:{payment:function(){var t=0,a=0;return this.g.forEach(function(e){e.isSelected&&(a+=e.num*e.price_current,t+=e.num)}),{num:t,sum:a}}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"tmpl"},[e("nav-bar",{attrs:{title:"购物车"}}),t._v(" "),e("div",{staticClass:"pay-detail"},[e("ul",t._l(t.g,function(a,i){return e("li",{key:a.cart_id,staticClass:"p-list"},[e("mt-switch",{on:{change:function(e){t.change(a.cart_id,a.num,i)}},model:{value:a.isSelected,callback:function(e){t.$set(a,"isSelected",e)},expression:"good.isSelected"}}),t._v(" "),e("img",{attrs:{src:a.image}}),t._v(" "),e("div",{staticClass:"pay-calc"},[e("p",[t._v(t._s(a.title))]),t._v(" "),e("div",{staticClass:"calc"},[e("span",[t._v("单价：￥"+t._s(a.price_current))]),t._v(" "),e("span",{on:{click:function(e){t.reduce(a.cart_id,i)}}},[t._v("-")]),t._v(" "),e("span",[t._v(t._s(a.num))]),t._v(" "),e("span",{on:{click:function(e){t.add(a.cart_id,i)}}},[t._v("+")]),t._v(" "),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.del(a.cart_id,i)}}},[t._v("删除")])])])],1)}))]),t._v(" "),e("div",{staticClass:"show-price"},[e("div",{staticClass:"show-1"},[e("p",[t._v("总计(不含运费):")]),t._v(" "),e("span",[t._v("已经选择商品"+t._s(t.payment.num)+"件，总价￥"+t._s(t.payment.sum)+"元")])]),t._v(" "),e("div",{staticClass:"show-2"},[e("mt-button",{attrs:{type:"danger",size:"large"}},[t._v("去结算")])],1)])],1)},staticRenderFns:[]};var s=e("VU/8")(n,c,!1,function(t){e("hBgn")},"data-v-b30a1262",null);a.default=s.exports},hBgn:function(t,a){}});